---
title: Tracking
sidebar_label: Tracking
sidebar_position: 5
---

# Event Tracking

Track impressions, clicks, and conversions to measure ad performance and improve relevance.

## Impression Tracking

**Automatic:** The SDK automatically tracks impressions when using `decideFromContext()`.

```typescript
const ad = await client.decideFromContext({
  userMessage: "I need car insurance"
});
// Impression automatically tracked ✓
```

**Manual tracking** (if using raw `decide()` API):

```typescript
await client.trackImpression({
  agent_id: 'agt_YOUR_AGENT_ID',
  request_id: ad.request_id,
  decision_id: ad.decision_id,
  unit_id: ad._ad.unit_id,
  tracking_token: ad.tracking_token
});
```

:::note Revenue Requirement
As of v0.9.0, impression tracking is **required** to earn revenue from clicks. Clicks without prior impressions will redirect users but won't generate revenue.
:::

## Click Tracking

**Automatic:** Use `click_url` for auto-tracked clicks (recommended):

```typescript
<a href={ad.click_url} target="_blank">
  {ad.creative.cta}
</a>
```

**Manual tracking:**

```typescript
await client.trackClickFromAd(ad, {
  click_context: "User clicked sponsored suggestion"
});
```

## Conversion Tracking

Track conversions to improve ad relevance:

```typescript
await client.track({
  event_id: `evt_${generateUUID()}`,
  event_type: 'conversion',
  occurred_at: new Date().toISOString(),
  agent_id: 'agt_YOUR_AGENT_ID',
  request_id: ad.request_id,
  decision_id: ad.decision_id,
  unit_id: ad._ad.unit_id,
  tracking_token: ad.tracking_token,
  metadata: {
    conversion_value: 99.99,
    conversion_type: 'purchase'
  }
});
```

## Next Steps

- [Best Practices →](/applications/best-practices)
- [API Reference →](/api/sdk)
